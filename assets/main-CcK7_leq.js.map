{"version":3,"file":"main-CcK7_leq.js","sources":["../../src/main.js"],"sourcesContent":["/* =========================================\n   CONFIG & UTILS\n   ========================================= */\nconst allowClickSelectors = [\n  '.header__burger',\n  '.header__link',\n  '.header__cta',\n  '#burger-btn',\n  '#nav-menu'\n];\n\nfunction isAllowedClick(target) {\n  return allowClickSelectors.some(sel => target.closest && target.closest(sel));\n}\n\n/* =========================================\n   MAIN INITIALIZATION (WAIT FOR ASSETS)\n   ========================================= */\nwindow.addEventListener('load', () => {\n  \n  // 0. Library Checks\n  const hasGSAP = typeof gsap !== 'undefined';\n  const hasScrollTrigger = typeof ScrollTrigger !== 'undefined';\n  const hasLenis = typeof Lenis !== 'undefined';\n  const hasLucide = typeof lucide !== 'undefined';\n\n  if (hasGSAP && hasScrollTrigger) {\n      gsap.registerPlugin(ScrollTrigger);\n  }\n\n  // 1. Initialize Icons\n  if (hasLucide) lucide.createIcons();\n\n  // 2. Mobile Menu Logic\n  try {\n    const burgerBtn = document.getElementById('burger-btn');\n    const navMenu = document.getElementById('nav-menu');\n    const links = document.querySelectorAll('.header__link, .header__cta');\n\n    if (burgerBtn && navMenu) {\n      burgerBtn.addEventListener('click', () => {\n        navMenu.classList.toggle('active');\n        const isOpen = navMenu.classList.contains('active');\n\n        if (isOpen) {\n          burgerBtn.innerHTML = '<i data-lucide=\"x\"></i>';\n          document.body.style.overflow = 'hidden';\n        } else {\n          burgerBtn.innerHTML = '<i data-lucide=\"menu\"></i>';\n          document.body.style.overflow = '';\n        }\n        if (hasLucide) lucide.createIcons();\n      });\n\n      links.forEach(link => {\n        link.addEventListener('click', () => {\n          navMenu.classList.remove('active');\n          if (burgerBtn) burgerBtn.innerHTML = '<i data-lucide=\"menu\"></i>';\n          document.body.style.overflow = '';\n          if (hasLucide) lucide.createIcons();\n        });\n      });\n    }\n  } catch (err) {\n    console.error('Mobile menu error:', err);\n  }\n\n  // 3. GSAP Animations\n  try {\n    if (hasGSAP) {\n      \n      // --- A. HERO SECTION ---\n      const tlHero = gsap.timeline({ defaults: { ease: 'power3.out', duration: 1 } });\n\n      // Текст Hero\n      if (document.querySelector('.hero__badge-pill')) {\n         tlHero.from('.hero__badge-pill', { y: 20, opacity: 0, duration: 0.6 })\n               .from('.hero__title-center', { y: 30, opacity: 0, duration: 0.8 }, \"-=0.4\")\n               .from('.hero__desc-center', { y: 20, opacity: 0, duration: 0.8 }, \"-=0.6\")\n               .from('.hero__btns-center', { y: 20, opacity: 0, duration: 0.8 }, \"-=0.6\");\n      }\n\n      // 3D Интерфейс\n      if (document.querySelector('.interface-card')) {\n        tlHero.to('.interface-card', { \n            opacity: 1, \n            rotateX: 10, \n            y: 0, \n            startAt: { y: 100, rotateX: 45 }, \n            duration: 1.2,\n            ease: \"back.out(1.7)\"\n        }, \"-=0.4\");\n      }\n\n      // Боковые плашки\n      if (document.querySelector('.badge-left')) {\n        tlHero.to('.badge-left', { opacity: 1, x: 0, duration: 0.6 }, \"-=0.8\");\n        tlHero.to('.badge-right', { opacity: 1, x: 0, duration: 0.6 }, \"-=0.6\");\n      }\n\n      // Симуляция чата в Hero\n      setTimeout(() => {\n          const typing = document.querySelector('.typing-indicator');\n          const hiddenMsg = document.querySelector('.hidden-msg');\n          \n          if (typing && hiddenMsg) {\n              const msgContainer = typing.closest('.msg');\n              if (msgContainer) msgContainer.style.display = 'none'; \n              \n              hiddenMsg.style.display = 'flex'; \n              gsap.from(hiddenMsg, { opacity: 0, y: 10, duration: 0.5 });\n          }\n      }, 3500);\n\n      // --- B. BENEFITS SECTION ---\n      if (document.querySelector('.benefits-grid')) {\n          gsap.from('.benefit-card', {\n            scrollTrigger: {\n                trigger: '.benefits-grid',\n                start: 'top 90%',\n            },\n            y: 30,\n            opacity: 0,\n            duration: 0.6,\n            stagger: 0.1\n          });\n      }\n\n      // --- C. PLATFORM (BENTO) SECTION ---\n      if (document.querySelector('.section-header')) {\n        gsap.from('.section-header', {\n            scrollTrigger: {\n                trigger: '#platform',\n                start: 'top 80%',\n            },\n            y: 30,\n            opacity: 0,\n            duration: 0.8\n        });\n      }\n\n      if (document.querySelector('.bento-grid')) {\n          gsap.from('.bento-card', {\n            scrollTrigger: {\n                trigger: '.bento-grid',\n                start: 'top 85%',\n            },\n            y: 50,\n            opacity: 0,\n            duration: 0.6,\n            stagger: 0.1\n          });\n      }\n\n      // --- D. INNOVATIONS SECTION ---\n      if (document.querySelector('.innovations-layout')) {\n          gsap.from('.innovations-layout', {\n              scrollTrigger: {\n                  trigger: '#innovations',\n                  start: 'top 80%'\n              },\n              y: 40,\n              opacity: 0,\n              duration: 0.8\n          });\n      }\n\n      // --- E. BLOG SECTION ---\n      if (document.querySelector('.blog-grid')) {\n          gsap.from('.blog-card', {\n            scrollTrigger: {\n                trigger: '.blog-grid',\n                start: 'top 85%',\n            },\n            y: 40,\n            opacity: 0,\n            duration: 0.8,\n            stagger: 0.15\n          });\n      }\n    }\n  } catch (err) {\n    console.error('Animation error:', err);\n  }\n\n  // 4. Accordion Logic (Innovations)\n  try {\n      const accItems = document.querySelectorAll('.accordion-item');\n      if (accItems.length > 0) {\n          accItems.forEach(item => {\n              item.addEventListener('click', () => {\n                  // Закрываем другие (аккордеон)\n                  accItems.forEach(otherItem => {\n                      if (otherItem !== item) otherItem.classList.remove('active');\n                  });\n                  // Тогглим текущий\n                  item.classList.toggle('active');\n              });\n          });\n      }\n  } catch (err) {\n      console.error('Accordion error:', err);\n  }\n\n  // 5. Smooth Scroll (Lenis)\n  if (hasLenis) {\n    const lenis = new Lenis({\n      duration: 1.2,\n      smooth: true,\n      // Исправление для мобильных\n      touchMultiplier: 2, \n    });\n    function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }\n    requestAnimationFrame(raf);\n  }\n\n  // 6. Safe Link Blocking (Specific to your requirements)\n  try {\n    document.querySelectorAll('.cmsmasters-blog__post a, .entry-title a').forEach(link => {\n      link.addEventListener('click', (e) => {\n        if (isAllowedClick(e.target)) return;\n        e.preventDefault();\n      });\n    });\n    } catch (e) { }\n    \n  // 7. Contact Form Logic\n  const contactForm = document.getElementById('form-request');\n  const successMsg = document.getElementById('success-msg');\n  const resetBtn = document.getElementById('reset-form-btn');\n  \n  // Elements for Captcha\n  const mathQuestion = document.getElementById('math-question');\n  const captchaInput = document.getElementById('captcha-input');\n  const captchaError = document.getElementById('captcha-error');\n\n  let captchaResult = 0;\n\n  // Generate Math Captcha\n  const initCaptcha = () => {\n      const n1 = Math.floor(Math.random() * 10);\n      const n2 = Math.floor(Math.random() * 10);\n      captchaResult = n1 + n2;\n      if(mathQuestion) mathQuestion.textContent = `${n1} + ${n2} = ?`;\n      if(captchaInput) captchaInput.value = '';\n      if(captchaError) captchaError.style.display = 'none';\n  };\n\n  // Init on load\n  initCaptcha();\n\n  if (contactForm) {\n      contactForm.addEventListener('submit', (e) => {\n          e.preventDefault();\n          \n          // Validate Captcha\n          if (parseInt(captchaInput.value) !== captchaResult) {\n              captchaError.style.display = 'block';\n              captchaInput.style.borderColor = '#EF4444';\n              // Анимация тряски для поля при ошибке\n              gsap.fromTo(captchaInput, { x: -5 }, { x: 5, duration: 0.1, repeat: 3, yoyo: true });\n              return;\n          }\n\n          // If Valid\n          captchaError.style.display = 'none';\n          captchaInput.style.borderColor = '#E2E8F0';\n\n          // Simulate AJAX\n          const btn = contactForm.querySelector('button[type=\"submit\"]');\n          const originalText = btn.innerHTML;\n          \n          btn.innerHTML = '<span>Отправка...</span>';\n          btn.style.opacity = '0.8';\n          btn.disabled = true;\n\n          setTimeout(() => {\n              // Success Action\n              // contactForm.style.display = 'none'; <--- ЭТУ СТРОКУ МЫ УБРАЛИ\n              successMsg.style.display = 'flex';  // Показываем оверлей поверх формы\n              \n              // Reset button state\n              btn.innerHTML = originalText;\n              btn.style.opacity = '1';\n              btn.disabled = false;\n              \n              // Refresh Icon in success message\n              if (hasLucide) lucide.createIcons();\n          }, 1500);\n      });\n  }\n\n  // Reset form functionality (\"Отправить еще\")\n  if (resetBtn) {\n      resetBtn.addEventListener('click', (e) => {\n          e.preventDefault(); // Чтобы не скроллило вверх\n          contactForm.reset(); // Очищаем поля\n          initCaptcha(); // Новая капча\n          \n          // Плавно скрываем сообщение\n          gsap.to(successMsg, {\n              opacity: 0,\n              duration: 0.3,\n              onComplete: () => {\n                  successMsg.style.display = 'none';\n                  successMsg.style.opacity = 1; // Возвращаем для следующего раза\n              }\n          });\n      });\n    }\n    // 8. Cookie Popup Logic\n  const cookiePopup = document.getElementById('cookie-popup');\n  const acceptBtn = document.getElementById('cookie-accept');\n  const declineBtn = document.getElementById('cookie-decline');\n\n  // Проверка: был ли уже выбор?\n  const hasConsent = localStorage.getItem('cookieConsent');\n\n  if (!hasConsent && cookiePopup) {\n      // Показываем через 2 секунды\n      setTimeout(() => {\n          cookiePopup.classList.add('show');\n      }, 2000);\n  }\n\n  if (acceptBtn && cookiePopup) {\n      acceptBtn.addEventListener('click', () => {\n          localStorage.setItem('cookieConsent', 'true'); // Запоминаем \"Да\"\n          \n          // Анимация исчезновения\n          cookiePopup.style.opacity = '0';\n          cookiePopup.style.transform = 'translateY(10px)';\n          setTimeout(() => {\n              cookiePopup.classList.remove('show');\n          }, 400);\n      });\n  }\n\n  if (declineBtn && cookiePopup) {\n      declineBtn.addEventListener('click', () => {\n          localStorage.setItem('cookieConsent', 'false'); // Запоминаем \"Нет\"\n          \n          cookiePopup.style.opacity = '0';\n          cookiePopup.style.transform = 'translateY(10px)';\n          setTimeout(() => {\n              cookiePopup.classList.remove('show');\n          }, 400);\n      });\n  }\n\n});"],"names":["allowClickSelectors","isAllowedClick","target","sel","hasGSAP","hasScrollTrigger","hasLenis","hasLucide","burgerBtn","navMenu","links","link","err","tlHero","typing","hiddenMsg","msgContainer","accItems","item","otherItem","raf","time","lenis","e","contactForm","successMsg","resetBtn","mathQuestion","captchaInput","captchaError","captchaResult","initCaptcha","n1","n2","btn","originalText","cookiePopup","acceptBtn","declineBtn"],"mappings":"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"}